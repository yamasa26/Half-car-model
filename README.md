# 4DOF-half-car-model
4自由度のハーフカーモデルをもとに、特徴の異なる3車種の車両のピッチング挙動を解析するシミュレータです。  
ハーフカーモデルの運動方程式をC++で定義・数値計算して、計算結果をcsvファイルで出力し、出力データをもとにpythonで可視化しました。
## 概要
### half-car-sim.cpp
1. 車両の重心の垂直変位、ピッチ角、前後のバネ下質量の垂直変位の計4つを変数とした4自由度を設定
2. オイラー法と比べて精度の高い4次ルンゲクッタ法（RK4）を使って運動方程式を計算
3. GR86、Lexus LS、Samberといったピッチング特性の異なる3車種の物理パラメータを用意
4. 停止状態から65km/hまで加速したら急ブレーキをかける条件でシミュレーション
5. 行列計算に外部ライブラリのEigenを使用
### sim-viewer.py
1. C++が出力したデータをもとに、車両、サスペンションなどをアニメーション化
2. 走行時間や車速、ピッチ角の数値の可視化に加えて、ピッチ角の変化をリアルタイムでグラフ表示
3. ボタン操作で車種の切り替えが可能

## 使い方
### 使用環境
- C++17、Eigen3
- Python3、pandas、numpy、matplotlib
### 1.C++のビルド・実行
```
g++ -I /path/to/eigen src/half-car-sim.cpp -o half_car_sim
./half_car_sim
```
### 2.Pythonの起動
```
python scripts/sim-viewer.py
```

